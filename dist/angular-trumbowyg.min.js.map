{"version":3,"sources":["src/app.js","src/components/trumbowyg/trumbowyg.js","templates.js","src/components/trumbowyg/trumbowyg.html"],"names":["angular","module","component","templateUrl","bindings","options","ngDisabled","placeholder","onFocus","onBlur","onInit","onChange","onResize","onPaste","onOpenfullscreen","onClosefullscreen","onClose","require","ngModel","controller","$element","$scope","$attrs","_this","this","TBW_EVENTS","EVENTS_PREFIX","getElementReference","element","find","getEditorReference","updateModelValue","$applyAsync","value","trumbowyg","$setViewValue","emitEvent","event","attr","$normalize","isFunction","initializeEditor","on","forEach","$render","$onDestroy","$onChanges","changes","isFirstChange","extend","$onInit","$modelValue","run","$templateCache","put"],"mappings":"AAAA,YAAAA,SAAQC,OAAO;ACAf,YAAAD,SAAQC,OAAO,aACZC,UAAU,aACTC,YAAa,gDACbC,UACEC,QAAS,KACTC,WAAY,KACZC,YAAa,KACbC,QAAS,KACTC,OAAQ,KACRC,OAAQ,KACRC,SAAU,KACVC,SAAU,KACVC,QAAS,KACTC,iBAAkB,KAClBC,kBAAmB,KACnBC,QAAS,MAEXC,SACEC,QAAS,WAEXC,YACE,WACA,SACA,SACA,SAAUC,EAAUC,EAAQC,GAAQ,GAAAC,GAAAC,KAC5BC,GACJ,QACA,OACA,OACA,SACA,SACA,QACA,iBACA,kBACA,SAEFC,EAAgB,KAEhBF,MAAKG,oBAAsB,WAAA,MAAM3B,SAAQ4B,QAAQR,EAASS,KAAK,WAE/DL,KAAKM,mBAAqB,WAAA,MAAMP,GAAKI,sBAAsBE,KAAK,sBAEhEL,KAAKO,iBAAmB,WACtBV,EAAOW,YAAY,WACjB,GAAMC,GAAQV,EAAKO,qBAAqBI,UAAU,OAClDX,GAAKL,QAAQiB,cAAcF,MAI/BT,KAAKY,UAAY,SAACC,GAChB,GAAMC,GAAOhB,EAAOiB,WAAP,MAAwBF,EACjCrC,SAAQwC,WAAWjB,EAAKe,KAC1BjB,EAAOW,YAAY,WAAA,MAAMT,GAAKe,QAIlCd,KAAKiB,iBAAmB,SAACb,EAASvB,GAChCuB,EAAQM,UAAU7B,GACfqC,GAAG,YAAa,WAAA,MAAMnB,GAAKQ,qBAC3BW,GAAG,WAAY,WAAA,MAAMnB,GAAKQ,qBAC7B/B,QAAQ2C,QAAQlB,EAAY,SAACY,GAC3BT,EAAQc,GAAR,GAAchB,EAAgBW,EAAS,WAAA,MAAMd,GAAKa,UAAUC,OAE9Dd,EAAKL,QAAQ0B,WAGfpB,KAAKqB,WAAa,WAChBtB,EAAKI,sBAAsBO,UAAU,YAGvCV,KAAKsB,WAAa,SAACC,GACjB,GAAMnB,GAAUL,EAAKI,qBAEjBoB,GAAQ1C,UAAY0C,EAAQ1C,QAAQ2C,iBACtCpB,EAAQM,UAAU,WAGhBa,EAAQ1C,SACVkB,EAAKkB,iBAAiBb,EAAS5B,QAAQiD,UAAW1B,EAAKlB,UAGrD0C,EAAQzC,YACVsB,EAAQM,UAAUX,EAAKjB,WAAa,UAAY,UAG9CyC,EAAQxC,aACVgB,EAAKO,qBAAqBQ,KAAK,cAAef,EAAKhB,cAIvDiB,KAAK0B,QAAU,WACb3B,EAAKL,QAAQ0B,QAAU,WACrB,GAAMhB,GAAUL,EAAKO,oBACrBF,GAAQM,UAAU,OAAQX,EAAKL,QAAQiC;AC7FnD,YAAAnD,SAAQC,OAAO,aAAamD,KAAK,iBAAkB,SAASC,GCA5DA,EAAAC,IAAA,gDAAA","file":"angular-trumbowyg.min.js","sourcesContent":["angular.module('trumbowyg', []);\r\n","angular.module('trumbowyg')\r\n  .component('trumbowyg', {\r\n    templateUrl: 'trumbowyg/components/trumbowyg/trumbowyg.html',\r\n    bindings: {\r\n      options: '<?',\r\n      ngDisabled: '<?',\r\n      placeholder: '@?',\r\n      onFocus: '&?',\r\n      onBlur: '&?',\r\n      onInit: '&?',\r\n      onChange: '&?',\r\n      onResize: '&?',\r\n      onPaste: '&?',\r\n      onOpenfullscreen: '&?',\r\n      onClosefullscreen: '&?',\r\n      onClose: '&?',\r\n    },\r\n    require: {\r\n      ngModel: 'ngModel'\r\n    },\r\n    controller: [\r\n      '$element',\r\n      '$scope',\r\n      '$attrs',\r\n      function ($element, $scope, $attrs) {\r\n        const TBW_EVENTS = [\r\n          'focus',\r\n          'blur',\r\n          'init',\r\n          'change',\r\n          'resize',\r\n          'paste',\r\n          'openfullscreen',\r\n          'closefullscreen',\r\n          'close'\r\n        ],\r\n        EVENTS_PREFIX = 'tbw';\r\n\r\n        this.getElementReference = () => angular.element($element.find('> div'));\r\n\r\n        this.getEditorReference = () => this.getElementReference().find('.trumbowyg-editor');\r\n\r\n        this.updateModelValue = () => {\r\n          $scope.$applyAsync(() => {\r\n            const value = this.getEditorReference().trumbowyg('html');\r\n            this.ngModel.$setViewValue(value)\r\n          });\r\n        }\r\n\r\n        this.emitEvent = (event) => {\r\n          const attr = $attrs.$normalize(`on-${event}`);\r\n          if (angular.isFunction(this[attr])) {\r\n            $scope.$applyAsync(() => this[attr]());\r\n          }\r\n        }\r\n\r\n        this.initializeEditor = (element, options) => {\r\n          element.trumbowyg(options)\r\n            .on('tbwchange', () => this.updateModelValue())\r\n            .on('tbwpaste', () => this.updateModelValue());\r\n          angular.forEach(TBW_EVENTS, (event) => {\r\n            element.on(`${EVENTS_PREFIX}${event}`, () => this.emitEvent(event));\r\n          })\r\n          this.ngModel.$render();\r\n        }\r\n\r\n        this.$onDestroy = () => {\r\n          this.getElementReference().trumbowyg('destroy');\r\n        };\r\n\r\n        this.$onChanges = (changes) => {\r\n          const element = this.getElementReference();\r\n\r\n          if (changes.options && !changes.options.isFirstChange()) {\r\n            element.trumbowyg('destroy');\r\n          }\r\n\r\n          if (changes.options) {\r\n            this.initializeEditor(element, angular.extend({}, this.options));\r\n          }\r\n\r\n          if (changes.ngDisabled) {\r\n            element.trumbowyg(this.ngDisabled ? 'disable' : 'enable');\r\n          }\r\n\r\n          if (changes.placeholder) {\r\n            this.getEditorReference().attr('placeholder', this.placeholder);\r\n          }\r\n        };\r\n\r\n        this.$onInit = () => {\r\n          this.ngModel.$render = () => {\r\n            const element = this.getEditorReference();\r\n            element.trumbowyg('html', this.ngModel.$modelValue);\r\n          };\r\n        };\r\n      }\r\n    ]\r\n  });\r\n","angular.module('trumbowyg').run(['$templateCache', function($templateCache) {$templateCache.put('trumbowyg/components/trumbowyg/trumbowyg.html','<style media=\"screen\">\\r\\n  trumbowyg {\\r\\n    display: block;\\r\\n  }\\r\\n</style>\\r\\n<div></div>\\r\\n');}]);","<style media=\"screen\">\r\n  trumbowyg {\r\n    display: block;\r\n  }\r\n</style>\r\n<div></div>\r\n"],"sourceRoot":"/source/"}
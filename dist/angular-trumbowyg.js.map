{"version":3,"sources":["src/app.js","src/components/trumbowyg/trumbowyg.js","templates.js","src/components/trumbowyg/trumbowyg.html"],"names":["angular","module","component","templateUrl","bindings","options","ngDisabled","placeholder","onFocus","onBlur","onInit","onChange","onResize","onPaste","onOpenfullscreen","onClosefullscreen","onClose","require","ngModel","controller","$element","$scope","$attrs","TBW_EVENTS","EVENTS_PREFIX","getElementReference","element","find","getEditorReference","updateModelValue","$applyAsync","value","trumbowyg","$setViewValue","emitEvent","event","attr","$normalize","isFunction","initializeEditor","on","forEach","$render","$onDestroy","$onChanges","changes","isFirstChange","extend","$onInit","$modelValue","run","$templateCache","put"],"mappings":";;AAAAA,QAAQC,MAAR,CAAe,WAAf,EAA4B,EAA5B;;;ACAAD,QAAQC,MAAR,CAAe,WAAf,EACGC,SADH,CACa,WADb,EAC0B;AACtBC,eAAa,+CADS;AAEtBC,YAAU;AACRC,aAAS,IADD;AAERC,gBAAY,IAFJ;AAGRC,iBAAa,IAHL;AAIRC,aAAS,IAJD;AAKRC,YAAQ,IALA;AAMRC,YAAQ,IANA;AAORC,cAAU,IAPF;AAQRC,cAAU,IARF;AASRC,aAAS,IATD;AAURC,sBAAkB,IAVV;AAWRC,uBAAmB,IAXX;AAYRC,aAAS;AAZD,GAFY;AAgBtBC,WAAS;AACPC,aAAS;AADF,GAhBa;AAmBtBC,cAAY,CACV,UADU,EAEV,QAFU,EAGV,QAHU,EAIV,UAAUC,QAAV,EAAoBC,MAApB,EAA4BC,MAA5B,EAAoC;AAAA;;AAClC,QAAMC,aAAa,CACjB,OADiB,EAEjB,MAFiB,EAGjB,MAHiB,EAIjB,QAJiB,EAKjB,QALiB,EAMjB,OANiB,EAOjB,gBAPiB,EAQjB,iBARiB,EASjB,OATiB,CAAnB;AAAA,QAWAC,gBAAgB,KAXhB;;AAaA,SAAKC,mBAAL,GAA2B;AAAA,aAAMzB,QAAQ0B,OAAR,CAAgBN,SAASO,IAAT,CAAc,OAAd,CAAhB,CAAN;AAAA,KAA3B;;AAEA,SAAKC,kBAAL,GAA0B;AAAA,aAAM,MAAKH,mBAAL,GAA2BE,IAA3B,CAAgC,mBAAhC,CAAN;AAAA,KAA1B;;AAEA,SAAKE,gBAAL,GAAwB,YAAM;AAC5BR,aAAOS,WAAP,CAAmB,YAAM;AACvB,YAAMC,QAAQ,MAAKH,kBAAL,GAA0BI,SAA1B,CAAoC,MAApC,CAAd;AACA,cAAKd,OAAL,CAAae,aAAb,CAA2BF,KAA3B;AACD,OAHD;AAID,KALD;;AAOA,SAAKG,SAAL,GAAiB,UAACC,KAAD,EAAW;AAC1B,UAAMC,OAAOd,OAAOe,UAAP,SAAwBF,KAAxB,CAAb;AACA,UAAInC,QAAQsC,UAAR,CAAmB,MAAKF,IAAL,CAAnB,CAAJ,EAAoC;AAClCf,eAAOS,WAAP,CAAmB;AAAA,iBAAM,MAAKM,IAAL,GAAN;AAAA,SAAnB;AACD;AACF,KALD;;AAOA,SAAKG,gBAAL,GAAwB,UAACb,OAAD,EAAUrB,OAAV,EAAsB;AAC5CqB,cAAQM,SAAR,CAAkB3B,OAAlB,EACGmC,EADH,CACM,WADN,EACmB;AAAA,eAAM,MAAKX,gBAAL,EAAN;AAAA,OADnB,EAEGW,EAFH,CAEM,UAFN,EAEkB;AAAA,eAAM,MAAKX,gBAAL,EAAN;AAAA,OAFlB;AAGA7B,cAAQyC,OAAR,CAAgBlB,UAAhB,EAA4B,UAACY,KAAD,EAAW;AACrCT,gBAAQc,EAAR,MAAchB,aAAd,GAA8BW,KAA9B,EAAuC;AAAA,iBAAM,MAAKD,SAAL,CAAeC,KAAf,CAAN;AAAA,SAAvC;AACD,OAFD;AAGA,YAAKjB,OAAL,CAAawB,OAAb;AACD,KARD;;AAUA,SAAKC,UAAL,GAAkB,YAAM;AACtB,YAAKlB,mBAAL,GAA2BO,SAA3B,CAAqC,SAArC;AACD,KAFD;;AAIA,SAAKY,UAAL,GAAkB,UAACC,OAAD,EAAa;AAC7B,UAAMnB,UAAU,MAAKD,mBAAL,EAAhB;;AAEA,UAAIoB,QAAQxC,OAAR,IAAmB,CAACwC,QAAQxC,OAAR,CAAgByC,aAAhB,EAAxB,EAAyD;AACvDpB,gBAAQM,SAAR,CAAkB,SAAlB;AACD;;AAED,UAAIa,QAAQxC,OAAZ,EAAqB;AACnB,cAAKkC,gBAAL,CAAsBb,OAAtB,EAA+B1B,QAAQ+C,MAAR,CAAe,EAAf,EAAmB,MAAK1C,OAAxB,CAA/B;AACD;;AAED,UAAIwC,QAAQvC,UAAZ,EAAwB;AACtBoB,gBAAQM,SAAR,CAAkB,MAAK1B,UAAL,GAAkB,SAAlB,GAA8B,QAAhD;AACD;;AAED,UAAIuC,QAAQtC,WAAZ,EAAyB;AACvB,cAAKqB,kBAAL,GAA0BQ,IAA1B,CAA+B,aAA/B,EAA8C,MAAK7B,WAAnD;AACD;AACF,KAlBD;;AAoBA,SAAKyC,OAAL,GAAe,YAAM;AACnB,YAAK9B,OAAL,CAAawB,OAAb,GAAuB,YAAM;AAC3B,YAAMhB,UAAU,MAAKE,kBAAL,EAAhB;AACAF,gBAAQM,SAAR,CAAkB,MAAlB,EAA0B,MAAKd,OAAL,CAAa+B,WAAvC;AACD,OAHD;AAID,KALD;AAMD,GA5ES;AAnBU,CAD1B;;;ACAAjD,QAAQC,MAAR,CAAe,WAAf,EAA4BiD,GAA5B,CAAgC,CAAC,gBAAD,EAAmB,UAASC,cAAT,EAAyB;ACA5EA,iBAAAC,GAAA,CAAA,+CAAA,EAAA,sGAAA;AAAA,CDAgC,CAAhC","file":"angular-trumbowyg.js","sourcesContent":["angular.module('trumbowyg', []);\r\n","angular.module('trumbowyg')\r\n  .component('trumbowyg', {\r\n    templateUrl: 'trumbowyg/components/trumbowyg/trumbowyg.html',\r\n    bindings: {\r\n      options: '<?',\r\n      ngDisabled: '<?',\r\n      placeholder: '@?',\r\n      onFocus: '&?',\r\n      onBlur: '&?',\r\n      onInit: '&?',\r\n      onChange: '&?',\r\n      onResize: '&?',\r\n      onPaste: '&?',\r\n      onOpenfullscreen: '&?',\r\n      onClosefullscreen: '&?',\r\n      onClose: '&?',\r\n    },\r\n    require: {\r\n      ngModel: 'ngModel'\r\n    },\r\n    controller: [\r\n      '$element',\r\n      '$scope',\r\n      '$attrs',\r\n      function ($element, $scope, $attrs) {\r\n        const TBW_EVENTS = [\r\n          'focus',\r\n          'blur',\r\n          'init',\r\n          'change',\r\n          'resize',\r\n          'paste',\r\n          'openfullscreen',\r\n          'closefullscreen',\r\n          'close'\r\n        ],\r\n        EVENTS_PREFIX = 'tbw';\r\n\r\n        this.getElementReference = () => angular.element($element.find('> div'));\r\n\r\n        this.getEditorReference = () => this.getElementReference().find('.trumbowyg-editor');\r\n\r\n        this.updateModelValue = () => {\r\n          $scope.$applyAsync(() => {\r\n            const value = this.getEditorReference().trumbowyg('html');\r\n            this.ngModel.$setViewValue(value)\r\n          });\r\n        }\r\n\r\n        this.emitEvent = (event) => {\r\n          const attr = $attrs.$normalize(`on-${event}`);\r\n          if (angular.isFunction(this[attr])) {\r\n            $scope.$applyAsync(() => this[attr]());\r\n          }\r\n        }\r\n\r\n        this.initializeEditor = (element, options) => {\r\n          element.trumbowyg(options)\r\n            .on('tbwchange', () => this.updateModelValue())\r\n            .on('tbwpaste', () => this.updateModelValue());\r\n          angular.forEach(TBW_EVENTS, (event) => {\r\n            element.on(`${EVENTS_PREFIX}${event}`, () => this.emitEvent(event));\r\n          })\r\n          this.ngModel.$render();\r\n        }\r\n\r\n        this.$onDestroy = () => {\r\n          this.getElementReference().trumbowyg('destroy');\r\n        };\r\n\r\n        this.$onChanges = (changes) => {\r\n          const element = this.getElementReference();\r\n\r\n          if (changes.options && !changes.options.isFirstChange()) {\r\n            element.trumbowyg('destroy');\r\n          }\r\n\r\n          if (changes.options) {\r\n            this.initializeEditor(element, angular.extend({}, this.options));\r\n          }\r\n\r\n          if (changes.ngDisabled) {\r\n            element.trumbowyg(this.ngDisabled ? 'disable' : 'enable');\r\n          }\r\n\r\n          if (changes.placeholder) {\r\n            this.getEditorReference().attr('placeholder', this.placeholder);\r\n          }\r\n        };\r\n\r\n        this.$onInit = () => {\r\n          this.ngModel.$render = () => {\r\n            const element = this.getEditorReference();\r\n            element.trumbowyg('html', this.ngModel.$modelValue);\r\n          };\r\n        };\r\n      }\r\n    ]\r\n  });\r\n","angular.module('trumbowyg').run(['$templateCache', function($templateCache) {$templateCache.put('trumbowyg/components/trumbowyg/trumbowyg.html','<style media=\"screen\">\\r\\n  trumbowyg {\\r\\n    display: block;\\r\\n  }\\r\\n</style>\\r\\n<div></div>\\r\\n');}]);","<style media=\"screen\">\r\n  trumbowyg {\r\n    display: block;\r\n  }\r\n</style>\r\n<div></div>\r\n"],"sourceRoot":"/source/"}